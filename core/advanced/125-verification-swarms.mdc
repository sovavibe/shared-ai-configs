---
description: 'Verification swarms - 3-agent pattern for comprehensive code review'
alwaysApply: false
---

# @125 Verification Swarms

## What is a Verification Swarm?

**Definition**: 3 specialized agents review code in parallel, must ALL approve before merge.

**Agents**:
1. **Coder Agent** (You) - Implementation quality
2. **Security Agent** (Snyk) - Vulnerabilities & compliance
3. **Architecture Agent** (Claude Opus) - Design & maintainability

## Pattern: Pre-Merge Verification

```
Code Ready → Verification Swarm:
  ├─ Coder: Check test coverage, code style
  ├─ Security: Run Snyk scan, check OWASP
  └─ Architecture: Check design patterns, performance

  If ALL pass ✓ → Merge
  If ANY fail ✗ → Return to development
```

## Implementation Flow

### Step 1: Trigger Verification (Before PR)

```bash
# When code is ready for review:
/review

# Swarm runs:
# 1. Snyk code scan (security)
# 2. Architecture analysis (Opus)
# 3. Your test/coverage check
```

### Step 2: Each Agent Reviews

**Coder Checklist**:
- [ ] Tests passing (unit + integration)
- [ ] Test coverage > 80%
- [ ] ESLint passing
- [ ] Code style consistent
- [ ] Comments clear

**Security Agent (Snyk)**:
- [ ] No high/critical vulnerabilities
- [ ] No dependency issues
- [ ] OWASP Top 10 compliance
- [ ] Secrets not committed

**Architecture Agent (Opus)**:
- [ ] Design consistent with project patterns
- [ ] Performance acceptable
- [ ] No technical debt introduced
- [ ] Maintainability high

### Step 3: Approval & Merge

- All 3 agents must approve
- Auto-create bug beads for issues
- Merge only when all pass

## Time Savings

| Process | Old Way | With Swarm | Savings |
|---------|---------|-----------|---------|
| PR review cycle | 3-4 iterations (2+ hours) | 1 iteration (15 min) | ~1.75 hours |
| Bug escape rate | 10% pre-production bugs | 2% | 80% fewer bugs |
| Security issues | 5 per release | <1 per release | ~4 issues prevented |

---

## Integration with /review Command

```bash
/review

# Executes:
# 1. Reads git diff
# 2. Runs Snyk scan (security agent)
# 3. Opus analysis (architecture agent)
# 4. Your verification (coder agent)
# 5. Creates bug beads for findings
# 6. Posts to GitLab MR (if in workflow)
```

---

**Enforce this rule**: All PRs must pass verification swarm before merge.
